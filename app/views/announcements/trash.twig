{% extends "layouts/default.twig" %}

{% block content %}
    <div style="max-width: 800px; margin: auto; padding: 20px;">
        <h2 style="text-align: center; color: #2E8B57;">Liste des Announcements supprim√©es</h2>
        <div style="text-align: right; margin-bottom: 20px;">
            <a href="/announcements" style="text-decoration: none; padding: 10px 15px; background-color: #2E8B57; color: white; border-radius: 5px;">Retour</a>
        </div>
        <div id="trash-table">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', loadTrashItems);

        function loadTrashItems() {
            fetch('/api/announcements/trash')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('trash-table').innerHTML = html;
                });
        }

        async function handleRestore(id) {
            const formData = new FormData();
            formData.append('token', '{{ csrf_token() }}');

            try {
                const response = await fetch(`/api/announcements/restore/${id}`, {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    loadTrashItems();
                } else {
                    alert('Error restoring announcement');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }
    </script>
{% endblock %}